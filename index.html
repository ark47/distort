<!DOCTYPE html>
<html>
<head>
	<title>Distort</title>
	<link rel="stylesheet" type="text/css" href="styles/style.css">
	<link href="https://fonts.googleapis.com/css?family=Sunflower:500" rel="stylesheet">
	<script type="text/javascript" src="scripts/script.js"></script>
</head>

<!-- BODY[start] -->
<body>
	<div class="container">
		<div class="svg-container">

		<!-- SVG[start] -->
		<svg>
			<!-- SQUARE -->
			<!-- <path d="M383.328,116.672v266.656H116.672V116.672H383.328 M433.328,66.672H66.672v366.656h366.656V66.672L433.328,66.672z"/> -->

			<!-- TRIANGLE -->
			<!-- <path d="M250.001,166.978L312.367,275l62.366,108.022H250.001H125.268L187.634,275L250.001,166.978 M250.001,66.978L144.333,250,L38.665,433.022h211.336h211.333C355.669,250L250.001,66.978z250.001,66.978z"/> -->

			<!-- CIRCLE -->
			<path d="M250,107.554c38.049,0,73.82,14.817,100.725,41.722c26.904,26.904,41.722,62.676,41.722,100.725
			s-14.817,73.82-41.722,100.725S288.049,392.446,250,392.446s-73.82-14.817-100.725-41.722
			C122.371,323.82,107.554,288.049,107.554,250s14.817-73.82,41.722-100.725C176.18,122.371,211.951,107.554,250,107.554 M250,47.554
			C138.192,47.554,47.554,138.192,47.554,250c0,111.808,90.638,202.446,202.446,202.446c111.808,0,202.446-90.639,202.446-202.446
			C452.446,138.192,361.808,47.554,250,47.554L250,47.554z"/>
		</svg>
		<!-- SVG[end] -->

		</div>
		<h2 class="btn" onclick="distort()">Distort</h2>
		<h2 class="btn" value="Refresh Page" onclick="window.location.href=window.location.href">Refresh</h2>
	</div>
</body>
<!-- BODY[end] -->

<script>

	/*  ______
		
		This selects all child tags of the <svg> tag. 
		It does NOT select the svg coordinates/attributes.
		______*/

	let svg = document.querySelector('svg').childNodes;
	
	/* 	______
		The distort() function defines the path attribute/coordinates as a variable.
		Then it is split into an array followed up with a forEach on it with randomizer()
		as an argument. It's joined together into a single string.
		Finally, the original <path> attribute with the new path coordinates.
		______*/

	function distort() {

		for (let i = 0; i < svg.length; i++) {
			if (svg[i].nodeName === "path") {
				let d = svg[i].getAttribute('d');
				d = d.split(',');
				d.forEach(cleaner);
				d.some(randomizer);
				d = d.join(',');
				svg[i].setAttribute("d", d);
				counter = 0;
				iRay = [];
			}
		}

	}
	
</script>

</html>